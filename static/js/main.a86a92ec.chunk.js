(this.webpackJsonptwitclone=this.webpackJsonptwitclone||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(25),s=n.n(c),o=n(84),i=(n(97),n(38)),u=n(18),p=Object(i.b)({name:"auth",initialState:{isLoggedIn:!1,user:""},reducers:{login:function(e,t){e.isLoggedIn=!0,e.user=t.payload.user},logout:function(e){e.isLoggedIn=!1,e.user=""}}}),d=p.actions,l=d.login,f=d.logout,b=p.reducer,m=n(32),j=n(20),h=n(4),O=n.n(h),x=n(9),g="https://safe-wave-92099.herokuapp.com",_={"Content-Type":"application/json"},v=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/posts/getSubscribedPosts",e.next=3,fetch("https://safe-wave-92099.herokuapp.com/posts/getSubscribedPosts",{method:"GET",headers:_,credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/posts/getAllPosts",e.next=3,fetch("https://safe-wave-92099.herokuapp.com/posts/getAllPosts",{mode:"cors",method:"GET",headers:_,credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/posts/new",r={content:t,image:n},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/posts/new",{method:"POST",headers:_,credentials:"include",body:JSON.stringify(r)});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/posts/likePost",n={post_id:t},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/posts/likePost",{method:"POST",headers:_,credentials:"include",body:JSON.stringify(n)});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/posts/unlikePost",n={post_id:t},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/posts/unlikePost",{method:"POST",headers:_,credentials:"include",body:JSON.stringify(n)});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/posts/createComment",r={post_id:t,content:n},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/posts/createComment",{method:"POST",headers:_,credentials:"include",body:JSON.stringify(r)});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g+"/posts/".concat(t,"/comments"),e.next=3,fetch(n,{method:"GET",headers:_,credentials:"include"});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(i.b)({name:"feed",initialState:[],reducers:{addPostToTop:function(e,t){return[t.payload].concat(Object(j.a)(e))},setPosts:function(e,t){return t.payload.posts},clearFeed:function(e){return[]},feedLikePost:function(e,t){return e.map((function(e){return e.post_id===t.payload.post_id?Object(m.a)(Object(m.a)({},e),{},{liked:!0,like_count:e.like_count+1}):e}))},feedUnlikePost:function(e,t){return e.map((function(e){return e.post_id===t.payload.post_id?Object(m.a)(Object(m.a)({},e),{},{liked:!1,like_count:e.like_count-1}):e}))}}}),T=function(){return function(e,t){w().then((function(t){e(L({posts:t}))}))}},F=function(){return function(e,t){v().then((function(t){e(L({posts:t}))}))}},J=C.actions,L=(J.addPostToTop,J.setPosts),U=(J.clearFeed,J.feedLikePost),D=J.feedUnlikePost,E=C.reducer,G=n(54),I=n(69),M={key:"root",storage:n.n(I).a,whitelist:["auth"]},A=Object(u.b)({auth:b,feed:E}),H=Object(G.a)(M,A),q=Object(i.a)({reducer:H}),Z=n(46),B=n(34),R=n.n(B),z=n(6),Q=function(){return Object(Z.b)()},W=Z.c,Y=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/account/login",r={user:t,pass:n},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/account/login",{credentials:"include",method:"POST",headers:_,body:JSON.stringify(r)});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/account/register",r={user:t,pass:n},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/account/register",{method:"POST",headers:_,body:JSON.stringify(r)});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/account/logout",e.next=3,fetch("https://safe-wave-92099.herokuapp.com/account/logout",{method:"POST",headers:_,credentials:"include"});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=n(72),$=n.n(V),ee=n(1),te=function(){var e=Object(z.g)(),t=Q(),n=function(){var n=Object(x.a)(O.a.mark((function n(r){var a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"/all"===(a=r.target.id)?t(T()):"/subscribed"===a&&t(F()),e.push(a);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),r=function(){var e=Object(x.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:t(f());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsxs)("div",{className:R.a["sidebar-container"],children:[Object(ee.jsx)("div",{className:R.a["sidebar-logo"],children:Object(ee.jsx)($.a,{style:{fontSize:"40px"}})}),Object(ee.jsx)("div",{onClick:n,id:"/all",className:R.a["sidebar-item"],children:"All Posts"}),Object(ee.jsx)("div",{onClick:n,id:"/subscribed",className:R.a["sidebar-item"],children:"Subscribed Posts"}),Object(ee.jsx)("div",{onClick:r,className:"".concat(R.a["sidebar-item"]," ").concat(R.a["sidebar-logout"]),children:"Logout"})]})},ne=n(63),re=n.n(ne),ae=n(8),ce=n(40),se=n.n(ce),oe=n(132),ie=function(e){var t=e.type,n=Object(r.useState)(""),a=Object(ae.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),i=Object(ae.a)(o,2),u=i[0],p=i[1],d=Q(),l=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(c,u);case 2:"all"===t?d(T()):"subscribed"===t&&d(F());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)("div",{className:se.a["post-form-container"],children:[Object(ee.jsx)("textarea",{className:se.a["post-text-area"],onChange:function(e){return s(e.target.value)}}),Object(ee.jsxs)("div",{className:se.a["post-submit-container"],children:[Object(ee.jsx)("input",{onChange:function(e){return p(e.target.value)},className:se.a["post-image-input"],type:"text",placeholder:"Image URL(optional)"}),Object(ee.jsx)(oe.a,{className:se.a["post-form-button"],onClick:l,variant:"contained",children:"Post"})]})]})},ue=n(29),pe=n.n(ue),de=n(47),le=n.n(de),fe=function(e){var t=e.comments,n=e.post_id,a=e.refreshCom,c=Object(r.useState)(""),s=Object(ae.a)(c,2),o=s[0],i=s[1],u=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,o);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==t.which){e.next=5;break}return t.preventDefault(),e.next=4,u();case 4:a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsxs)("div",{className:le.a["comments-container"],children:[Object(ee.jsx)("div",{className:le.a["comments-input-container"],children:Object(ee.jsx)("textarea",{onKeyPress:p,onChange:function(e){return i(e.target.value)},className:le.a["comments-input"]})}),t.map((function(e){return Object(ee.jsxs)("div",{className:le.a["comments-comment"],children:[e.username,Object(ee.jsx)("p",{children:e.content})]})}))]})},be=n(79),me=n.n(be),je=n(78),he=n.n(je),Oe=n(80),xe=n.n(Oe),ge=n(131),_e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ve=function(e){var t=e.post_id,n=e.content,a=e.username,c=e.created_at,s=e.liked,o=e.image_url,i=e.like_count,u=e.comment_count,p=Object(r.useState)(!1),d=Object(ae.a)(p,2),l=d[0],f=d[1],b=Object(r.useState)([]),m=Object(ae.a)(b,2),j=m[0],h=m[1],g=Object(r.useState)(!1),_=Object(ae.a)(g,2),v=_[0],w=_[1],k=Q(),S=new Date(c),C=new Date,T=Math.round(Math.abs(S.getTime()-C.getTime())/36e5)-8;console.log(S,C,T);var F=function(){var e=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:n=e.sent,console.log(n),h(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v||F(),w(!v);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)("div",{className:pe.a["post-container"],children:[Object(ee.jsxs)("div",{onClick:J,children:[Object(ee.jsxs)("div",{className:pe.a["post-header"],children:[Object(ee.jsx)("p",{children:a}),Object(ee.jsx)("p",{children:T>24?"".concat(_e[S.getMonth()]," ").concat(S.getDay()):"".concat(T,"h ago")})]}),Object(ee.jsx)("p",{children:n}),null!==o&&Object(ee.jsx)("img",{onClick:function(){return f(!0)},className:pe.a["post-image"],src:o,alt:a}),Object(ee.jsxs)("div",{className:pe.a["post-footer"],children:[Object(ee.jsxs)("div",{className:pe.a["comment-ind-container"],children:[Object(ee.jsx)(he.a,{}),Object(ee.jsx)("span",{children:u})]}),Object(ee.jsxs)("div",{className:s?pe.a["material-icon-heart"]:pe.a["material-icon-border-heart"],children:[s?Object(ee.jsx)(me.a,{onClick:function(e){e.stopPropagation(),k(function(e){return function(t,n){P(e),t(D({post_id:e}))}}(t))}}):Object(ee.jsx)(xe.a,{onClick:function(e){e.stopPropagation(),k(function(e){return function(t,n){y(e),t(U({post_id:e}))}}(t))}}),Object(ee.jsx)("span",{children:i})]})]})]}),v&&Object(ee.jsx)(fe,{refreshCom:F,post_id:t,comments:j}),null!==o&&Object(ee.jsx)(ge.a,{open:l,onClose:function(){return f(!1)},children:Object(ee.jsx)("img",{className:pe.a["modal-image"],src:o,alt:a})})]})},we=function(e){var t=e.type,n=W((function(e){return e.feed})),a=Q(),c=W((function(e){return e.auth.user}));return Object(r.useEffect)((function(){""!==c&&("all"===t?a(T()):"subscribed"===t&&a(F()))}),[c,a]),Object(ee.jsxs)("div",{className:re.a["feed-container"],children:[Object(ee.jsx)("h3",{className:re.a["feed-header"],children:"Home"}),Object(ee.jsx)(ie,{type:t}),0!==n.length?Object(ee.jsxs)("div",{children:[" ",n.map((function(e,t){return Object(ee.jsx)(ve,{post_id:e.post_id,content:e.content,username:e.username,created_at:e.created_at,liked:e.liked,image_url:e.image_url,like_count:e.like_count,comment_count:e.comment_count},t)}))," "]}):"No Posts"]})},ke=n(86),ye=["children"],Pe=function(e){var t=e.children,n=Object(ke.a)(e,ye),r=W((function(e){return e.auth.isLoggedIn}));return Object(ee.jsx)(z.b,Object(m.a)(Object(m.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(ee.jsx)(z.a,{to:{pathname:"/login",state:{from:n}}})}}))},Se=n(35),Ne=n.n(Se),Ce=function(){var e=Object(r.useState)(""),t=Object(ae.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(ae.a)(c,2),o=s[0],i=s[1],u=W((function(e){return e.auth.isLoggedIn})),p=Object(z.g)(),d=Q(),f=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Y(n,o);case 3:202===e.sent.status&&(d(l({user:n})),p.push("/feed"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,K(n,o);case 3:if(202!==e.sent.status){e.next=9;break}return e.next=7,Y(n,o);case 7:202===e.sent.status&&(d(l({user:n})),p.push("/all"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?Object(ee.jsx)(z.a,{to:"/all"}):Object(ee.jsxs)("form",{className:Ne.a["login-form-container"],children:[Object(ee.jsx)("label",{children:Object(ee.jsx)("b",{children:"Username"})}),Object(ee.jsx)("input",{className:Ne.a["login-form-input"],onChange:function(e){return a(e.target.value)},placeholder:"Username",type:"text"}),Object(ee.jsx)("label",{children:Object(ee.jsx)("b",{children:"Password"})}),Object(ee.jsx)("input",{className:Ne.a["login-form-input"],onChange:function(e){return i(e.target.value)},placeholder:"Password",type:"password"}),Object(ee.jsx)("button",{className:"".concat(Ne.a["login-form-input"]," ").concat(Ne.a["login-form-button"]),onClick:f,children:"Submit"}),Object(ee.jsx)("button",{className:Ne.a["login-form-input"],onClick:b,children:"Sign Up"})]})},Te=n(81),Fe=n.n(Te),Je=n(53),Le=n.n(Je),Ue=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/user/suggestedUsers",e.next=3,fetch("https://safe-wave-92099.herokuapp.com/user/suggestedUsers",{type:"cors",method:"GET",headers:_,credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"/user/followUser",n={target:t},e.next=4,fetch("https://safe-wave-92099.herokuapp.com/user/followUser",{method:"POST",headers:_,credentials:"include",body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e){var t=e.username;return Object(ee.jsxs)("div",{className:Le.a["suggested-entry"],children:[t,Object(ee.jsx)("button",{onClick:function(){De(t)},children:"Follow"})]})},Ge=function(){var e=Object(r.useState)([]),t=Object(ae.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(ee.jsxs)("div",{className:Le.a["widget-container"],children:[Object(ee.jsx)("h5",{children:"Suggested Users"}),n.map((function(e,t){return Object(ee.jsx)(Ee,{username:e.username},e.username)}))]})},Ie=n(82),Me=n.n(Ie),Ae=function(){return Object(ee.jsx)("div",{className:Me.a["sidebar-container"],children:Object(ee.jsx)(Ge,{})})},He=function(){return Object(ee.jsx)("div",{className:Fe.a["app-container"],children:Object(ee.jsxs)(z.d,{children:[Object(ee.jsx)(z.b,{path:"/login",children:Object(ee.jsx)(Ce,{})}),Object(ee.jsxs)(Pe,{path:"/all",children:[Object(ee.jsx)(te,{}),Object(ee.jsx)(we,{type:"all"}),Object(ee.jsx)(Ae,{})]}),Object(ee.jsxs)(Pe,{path:"/subscribed",children:[Object(ee.jsx)(te,{}),Object(ee.jsx)(we,{type:"subscribed"}),Object(ee.jsx)(Ae,{})]}),Object(ee.jsx)(Pe,{path:"/",children:Object(ee.jsx)(z.a,{to:"/all"})})]})})},qe=n(83),Ze=Object(G.b)(q);s.a.render(Object(ee.jsx)(a.a.StrictMode,{children:Object(ee.jsx)(Z.a,{store:q,children:Object(ee.jsx)(qe.a,{loading:null,persistor:Ze,children:Object(ee.jsx)(o.a,{basename:"/message-board",children:Object(ee.jsx)(He,{})})})})}),document.getElementById("root"))},29:function(e,t,n){e.exports={"post-container":"Post_post-container__1eauk","post-image":"Post_post-image__1eJ1c","post-header":"Post_post-header__1RNuL","material-icon-heart":"Post_material-icon-heart__2TuZ3","material-icon-border-heart":"Post_material-icon-border-heart__Gei2f","post-footer":"Post_post-footer__THcfM","comment-ind-container":"Post_comment-ind-container__DWjBB","modal-image":"Post_modal-image__1AGpc"}},34:function(e,t,n){e.exports={"sidebar-container":"Sidebar_sidebar-container__3ve-Y","sidebar-logo":"Sidebar_sidebar-logo__2qQro","sidebar-item":"Sidebar_sidebar-item__3tqF5","sidebar-logout":"Sidebar_sidebar-logout__29fYi"}},35:function(e,t,n){e.exports={"login-form-container":"LoginPage_login-form-container__2uptE","login-form-input":"LoginPage_login-form-input__10So9","login-form-button":"LoginPage_login-form-button__3hphZ"}},40:function(e,t,n){e.exports={"post-text-area":"PostForm_post-text-area__2tqHQ","post-form-container":"PostForm_post-form-container__2adad","post-submit-container":"PostForm_post-submit-container__2C7HZ","post-image-input":"PostForm_post-image-input__3-g9l","post-form-button":"PostForm_post-form-button__27-oG"}},47:function(e,t,n){e.exports={"comments-container":"PostComments_comments-container__3uFEf","comments-input-container":"PostComments_comments-input-container__3dFH5","comments-input":"PostComments_comments-input__ow6cX","comments-comment":"PostComments_comments-comment__1wGZk"}},53:function(e,t,n){e.exports={"widget-container":"Suggested_widget-container__3P3du","suggested-entry":"Suggested_suggested-entry__1F6jb"}},63:function(e,t,n){e.exports={"feed-container":"Feed_feed-container__24Wie","feed-header":"Feed_feed-header__3uiu4"}},81:function(e,t,n){e.exports={"app-container":"app_app-container__25y9D"}},82:function(e,t,n){e.exports={"sidebar-container":"SidebarRight_sidebar-container__1zSIq"}},97:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.a86a92ec.chunk.js.map